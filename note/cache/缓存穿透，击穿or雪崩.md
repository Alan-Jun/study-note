#### 缓存穿透

* 什么是**缓存穿透**？解决方案？

  答：查询一个不存在的值，导致缓存不被命中，最终大量请求落到数据库上，给数据库带来压力

  解决方案：

  1. 对这样的数据做空缓存
  
  2. 对请求进行过滤  
  
     * 普通过滤器
  
       某些业务场景，比如机票查询，需要用到出发城市到达城市，如果你传一个不存在的城市，这就会造成缓存穿透，然后我们当前的场景，中国总共才600多个城市，有机场的更是没有多少，由于数据量少，过滤逻辑简单那么我们就可以简单的使用城市的code来做一个map简单过滤器。map中查询不到的就直接返回
  
     * bitmap/roaringBitmap  
     
       > [bitmap&roaringBitMap](../algorithm/bitmap&roaringBitMap.md)
     
     * 布隆过滤器
     
       https://zhuanlan.zhihu.com/p/43263751
     
       https://cloud.tencent.com/developer/article/1136056

#### 缓存过期

##### 缓存击穿

* 什么是**缓存击穿**？解决方案？

  答：高并发情况下，查询时候访问的数据的缓存刚好过期了，这个和雪崩有那么一些类似。区别就是一个是大量同时失效

  解决方案：缓存预加载，针对热点数据在缓存快要失效前，做一次预加载（实现方式可以是在一次访问缓存的时候检查到缓存快要过期的时候，使用新的线程去做一次缓存刷新）

##### 缓存雪崩

* 什么是**缓存雪崩**？解决方案？

  答：大批量缓存再同一时间失效

  解决方案：

  ​	**系统第一次启动的时候可以使用缓存预热**

  1. 可以通过观察用户行为,合理设置缓存时间，**这个在分布式情况下代码实现比较麻烦,不推荐**
  2. 缓存预加载，针对热点数据在缓存快要失效前，做一次预加载（实现方式可以是在一次访问缓存的时候检查到缓存快要过期的时候，使用新的线程去做一次缓存刷新）

  **不推荐使用缓存永不过期，太消耗系统内存了**

