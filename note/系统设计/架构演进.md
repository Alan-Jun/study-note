https://www.jianshu.com/p/d4ead31b2787

# 1. 基本概念

## 一致性（Consistency）

一致性指的是多个数据副本是否能保持一致的特性，在一致性的条件下，系统在执行数据更新操作之后能够从一致性状态转移到另一个一致性状态。

对系统的一个数据更新成功之后，如果所有用户都能够读取到最新的值，该系统就被认为具有强一致性。

## 可用性（Avalability）

可用性指分布式系统在面对各种异常时可以提供正常服务的能力，可以用系统可用时间占总时间的比值来衡量，4 个 9 的可用性表示系统 99.99% 的时间是可用的。

在可用性条件下，要求系统提供的服务一直处于可用的状态，对于用户的每一个操作请求总是能够在有限的时间内返回结果。

## 分区容忍性（Partion Tolerance）

网络分区指分布式系统中的节点被划分为多个区域，每个区域内部可以通信，但是区域之间无法通信。

在分区容忍性条件下，分布式系统在遇到任何网络分区故障的时候，仍然需要能对外提供一致性和可用性的服务，除非是整个网络环境都发生了故障。

## 集群

一个特定领域的软件部署在多台服务器上并作为一个整体提供一类服务，这个整体称为集群。

如Zookeeper中的Master和Slave分别部署在多台服务器上，共同组成一个整体提供集中配置服务。在常见的集群中，客户端往往能够连接任意一个节点获得服务，并且当集群中一个节点掉线时，其他节点往往能够自动的接替它继续提供服务，这时候说明集群具有高可用性

# 2. 架构演进

## 2.1 单机架构

网站最初，是将服务Server,以及数据库DB，部署在同一台机器上，为网站提供服务

![image-20200509200422777](D:\document\record\study-note\系统设计\assets\image-20200509200422777.png)

> 随着用户的增长，调用量，数据量都上来了之后，Server就开始和数据库增强同一台机器的硬件资源了**

## 2.2 第一次演进：服务和数据库拆分

这一次主要就是为了决绝服务，和数据库争抢同一台机器硬件资源做的

![image-20200509201147861](assets\image-20200509201147861.png)

> **随着用户的增长，大量并发读写请求，数据库成了瓶颈**

## 2.3 第二次演进：使用第三方缓存

由于加入了缓存有效降低了读的压力

![image-20200509202106633](D:\document\record\study-note\系统设计\assets\image-20200509202106633.png)

> **用户继续增长，Server层吞吐量不足了**

## 2.4 第三次 